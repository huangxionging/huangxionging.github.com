<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 6.2.1 (452715)"/><meta name="altitude" content="38.54558563232422"/><meta name="author" content="Redman"/><meta name="created" content="2015-03-20 14:57:56 +0000"/><meta name="latitude" content="22.58743057234433"/><meta name="longitude" content="113.9620982647807"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2015-03-22 08:17:28 +0000"/><title>NSAssert</title></head><body>
<div>这是一个调试方法, 为了确保获得正确的结果,而使用的调试方法</div>
<div><span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #78492a">#define NSAssert(condition, desc, ...) \<br/>
    do { \<br/>
__PRAGMA_PUSH_NO_EXTRA_ARG_WARNINGS \<br/>
if (!(condition)) { \<br/>
    [[NSAssertionHandler currentHandler] handleFailureInMethod:_cmd \<br/>
object:self file:[NSString stringWithUTF8String:__FILE__] \<br/>
    lineNumber:__LINE__ description:(desc), ##__VA_ARGS__]; \<br/>
} \<br/>
        __PRAGMA_POP_NO_EXTRA_ARG_WARNINGS \<br/>
    } while(</span><span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #272ad8">0</span><span style="font-style: normal; font-variant: normal; font-weight: normal;"><span style="font-family: Menlo;"><span style="color: rgb(120, 73, 42);">)</span></span></span></div>
<div><span style="font-family: Menlo;"><span style="color: rgb(120, 73, 42);">#endif</span></span></div>
<div><span style="font-family: Menlo;"><span style="color: rgb(120, 73, 42);"><br/></span></span></div>
<div><span style="font-family: Menlo;"><span style="color: rgb(120, 73, 42);">从上面的定义看出, NSAssert 有两个参数 condition 和 desc, 等等</span></span></div>
<div><span style="font-family: Menlo;"><span style="color: rgb(120, 73, 42);">若 condition 这个条件成立, 则 !condition 不成立, 不会触发 if 语句里面的方法,</span></span></div>
<div><span style="font-family: Menlo;"><span style="color: rgb(120, 73, 42);">若 condition 条件不成立, 则触发方法.</span></span></div>
<div><span style="font-family: Menlo;"><span style="color: rgb(120, 73, 42);">所以使用的时候需要注意.</span></span></div>
<div><span style="font-family: Menlo;"><span style="color: rgb(120, 73, 42);"><br/></span></span></div>
<div><span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #78492a">NSAssertionHandler 是一个用来专门处理异常的类, 是一个单例类.</span></div>
<div><span style="font-family: Menlo;"><span style="color: rgb(120, 73, 42);"><br/></span></span></div>
<div><span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures">+ (</span><span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #703daa">NSAssertionHandler</span> <span style="font-family: Menlo;">*)currentHandler; 通过此方法创建当前处理的对象</span></div>
<div><span style="font-family: Menlo;"><br/></span></div>
<div><span style="font-family: Menlo;">// 有两个处理异常的方法, selector 是一个选择的方法, object 是谁来处理, fileName 是文件名, line 是代码的行号, format 是一些错误信息</span></div>
<div><span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures">- (</span><span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #bb2ca2">void</span><span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures">)handleFailureInMethod:(</span><span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #bb2ca2">SEL</span><span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures">)selector object:(</span><span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #bb2ca2">id</span><span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures">)object file:(</span><span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #703daa">NSString</span> <span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures">*)fileName lineNumber:(</span><span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #703daa">NSInteger</span><span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures">)line description:(</span><span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #703daa">NSString</span> <span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures">*)format,...</span> <span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #78492a">NS_FORMAT_FUNCTION</span><span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures">(</span><span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #272ad8">5</span><span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures">,</span><span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #272ad8">6</span><span style="font-style: normal; font-variant: normal; font-weight: normal;"><span style="font-family: Menlo;">);</span></span></div>
<div><span style="font-family: Menlo;"><br/></span></div>
<div><span style="font-family: Menlo;">// </span><span style="font-family: Menlo;"><span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures">functionName 是函数的名字, 其他参数跟 </span></span><span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures">handleFailureInMethod 的参数一样</span></div>
<div><span style="font-family: Menlo;">- (<span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #bb2ca2">void</span><span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures">)handleFailureInFunction:(</span><span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #703daa">NSString</span> <span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures">*)functionName file:(</span><span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #703daa">NSString</span> <span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures">*)fileName lineNumber:(</span><span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #703daa">NSInteger</span><span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures">)line description:(</span><span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #703daa">NSString</span> <span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures">*)format,...</span> <span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #78492a">NS_FORMAT_FUNCTION</span><span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures">(</span><span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #272ad8">4</span><span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures">,</span><span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #272ad8">5</span><span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures">);</span></span></div>
<div><span style="font-family: Menlo;"><br/></span></div>
<div><font face="Menlo"><span style="color: rgb(187, 43, 161);">__FILE__</span> 这个宏用来获取当前代码是哪个文件, <span style="color: rgb(187, 43, 161);">__LINE__</span> 这个宏用来获取 代码所在的行号;</font></div>
<div><span style="font-family: Menlo;"><br/></span></div>
<div><span style="font: 14.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #bb2ca2">__FUNCTION__ 则是用来获取当前代码执行的方法名. _cmd 也是获取方法名</span><span style="font-family: Menlo;"><br/></span></div>
<div><span style="font-family: Menlo;"><br/></span></div>
</body></html>