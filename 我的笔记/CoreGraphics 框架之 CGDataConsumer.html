<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 6.2.1 (452715)"/><meta name="altitude" content="21.82718658447266"/><meta name="author" content="Redman"/><meta name="created" content="2015-07-07 06:58:49 +0000"/><meta name="latitude" content="22.54698016613622"/><meta name="longitude" content="113.9366486302722"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2015-07-07 10:32:29 +0000"/><title>CoreGraphics 框架之 CGDataConsumer</title></head><body>
<div><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #008f00">/* CoreGraphics - CGDataConsumer.h<br/>
 * Copyright (c) 1999-2008 Apple Inc.<br/>
 * All rights reserved. */</span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures"><br/>
跟 PDF 有关<br/></span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff">#ifndef CGDATACONSUMER_H_<br/>
#define CGDATACONSUMER_H_</span></div>
<div><span style="font-family: Menlo;"><br/></span></div>
<div><span style="font-family: Menlo;">// 数据消费流, 用于将数据发送给数据用户</span></div>
<div><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff">typedef</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff">struct</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #3495af">CGDataConsumer</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures">*CGDataConsumerRef;<br/>
<br/></span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff">#include</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #b4261a">&lt;CoreGraphics/CGBase.h&gt;</span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff"><br/>
#include</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #b4261a">&lt;CoreFoundation/CFURL.h&gt;</span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff"><br/></span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures"><br/></span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff">CF_IMPLICIT_BRIDGING_ENABLED</span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures"><br/>
<br/></span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #008f00">/* This callback is called to copy `count' bytes from `buffer' to the data</span></div>
<div><span style="font-family: Menlo;"><span style="color: rgb(0, 143, 0);">   consumer. */</span></span></div>
<div><span style="font-family: Menlo;">拷贝指定字节数的数据到另一个缓冲区</span></div>
<div><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff">typedef</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #3495af">size_t</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures">(*CGDataConsumerPutBytesCallback)(</span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff">void</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures">*info,<br/>
   </span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff">const</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff">void</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures">*buffer,</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #3495af">size_t</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures">count);<br/>
<br/></span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #008f00">/* This callback is called to release the `info' pointer when the data</span></div>
<div><span style="font-family: Menlo;"><span style="color: rgb(0, 143, 0);">   provider is freed. */</span></span></div>
<div><span style="font-family: Menlo;">// 释放信息</span></div>
<div><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff">typedef</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff">void</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures">(*CGDataConsumerReleaseInfoCallback)(</span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff">void</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures">*info);<br/>
<br/></span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #008f00">/* Callbacks for writing data.<br/>
   `putBytes' copies `count' bytes from `buffer' to the consumer, and<br/>
     returns the number of bytes copied. It should return 0 if no more data<br/>
     can be written to the consumer.</span></div>
<div><span style="font-family: Menlo;"><span style="color: rgb(0, 143, 0);">   `releaseConsumer', if non-NULL, is called when the consumer is freed. */</span></span></div>
<div><span style="font-family: Menlo;">// 写数据</span></div>
<div><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff">struct</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures">CGDataConsumerCallbacks {<br/>
   </span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #3495af">CGDataConsumerPutBytesCallback</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures">putBytes;<br/>
   </span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #3495af">CGDataConsumerReleaseInfoCallback</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures">releaseConsumer;<br/>
};<br/></span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff">typedef</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff">struct</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #3495af">CGDataConsumerCallbacks</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures">CGDataConsumerCallbacks;<br/>
<br/></span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #008f00">/* Return the CFTypeID for CGDataConsumerRefs. */</span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures"><br/>
// 获得 类型 id<br/></span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff">CG_EXTERN</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #3495af">CFTypeID</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures">CGDataConsumerGetTypeID(</span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff">void</span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures">)<br/>
   </span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff">CG_AVAILABLE_STARTING</span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures">(__MAC_10_2, __IPHONE_2_0);<br/>
<br/></span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #008f00">/* Create a data consumer using `callbacks' to handle the data. `info' is</span></div>
<div><span style="font-family: Menlo;"><span style="color: rgb(0, 143, 0);">   passed to each of the callback functions. */</span></span></div>
<div><span style="font-family: Menlo;">// 创建数据消费流</span></div>
<div><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff">CG_EXTERN</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #3495af">CGDataConsumerRef</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures">CGDataConsumerCreate(</span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff">void</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures">*info,<br/>
   </span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff">const</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #3495af">CGDataConsumerCallbacks</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures">*callbacks)<br/>
   </span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff">CG_AVAILABLE_STARTING</span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures">(__MAC_10_0, __IPHONE_2_0);<br/>
<br/></span></div>
<div><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #008f00">/* Create a data consumer which writes data to `url'. */</span></div>
<div><span style="font-family: Menlo;">// 通过地址</span></div>
<div><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff">CG_EXTERN</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #3495af">CGDataConsumerRef</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures">CGDataConsumerCreateWithURL(</span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #3495af">CFURLRef</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures">url)<br/>
   </span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff">CG_AVAILABLE_STARTING</span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures">(__MAC_10_0, __IPHONE_2_0);<br/>
<br/></span></div>
<div><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #008f00">/* Create a data consumer which writes to `data'. */</span></div>
<div><span style="font-family: Menlo;">// 创建</span></div>
<div><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff">CG_EXTERN</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #3495af">CGDataConsumerRef</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures">CGDataConsumerCreateWithCFData(</span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #3495af">CFMutableDataRef</span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures"><br/>
    data)</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff">CG_AVAILABLE_STARTING</span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures">(__MAC_10_4, __IPHONE_2_0);<br/>
<br/></span></div>
<div><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #008f00">/* Equivalent to `CFRetain(consumer)'. */</span></div>
<div><span style="font-family: Menlo;">// 保持</span></div>
<div><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff">CG_EXTERN</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #3495af">CGDataConsumerRef</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures">CGDataConsumerRetain(</span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #3495af">CGDataConsumerRef</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures">consumer)<br/>
   </span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff">CG_AVAILABLE_STARTING</span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures">(__MAC_10_0, __IPHONE_2_0);<br/>
<br/></span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #008f00">/* Equivalent to `CFRelease(consumer)'. */</span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures"><br/>
// 释放<br/></span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff">CG_EXTERN</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff">void</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures">CGDataConsumerRelease(</span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #3495af">CGDataConsumerRef</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures">consumer)<br/>
   </span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff">CG_AVAILABLE_STARTING</span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures">(__MAC_10_0, __IPHONE_2_0);<br/>
<br/></span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff">CF_IMPLICIT_BRIDGING_DISABLED</span><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures"><br/>
<br/></span></div>
<div><span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #0433ff">#endif</span> <span style="font: 18.0px Menlo; font-variant-ligatures: no-common-ligatures; color: #008f00">/* CGDATACONSUMER_H_ */</span></div>
</body></html>